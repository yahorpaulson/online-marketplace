<div class="vehicle-container">
  <!-- Sidebar mit Filteroptionen -->
  <div class="sidebar">
    <h3>Fahrzeugfilter</h3>

    <label>Kategorie:</label>
    <select [(ngModel)]="currentVehicleType" (change)="applyFilters()">
      <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
    </select>

    <label>Marke:</label>
    <select [(ngModel)]="filters.brand" name="brand" (change)="onBrandChange()">
      <option value="0">Alle Marken</option>
      <option *ngFor="let brand of brands" [value]="brand.id">{{ brand.name }}</option>
    </select>

    <label>Modell:</label>
    <select [(ngModel)]="filters.model" name="model">
      <option value="0">Alle Modelle</option>
      <option *ngFor="let model of models" [value]="model.id">{{ model.name }}</option>
    </select>

    <label>Preis bis (€):</label>
    <input type="number" [(ngModel)]="filters.maxPrice" name="maxPrice" />

    <label>Kilometerstand bis:</label>
    <input type="number" [(ngModel)]="filters.maxMileage" name="maxMileage" />

    <label>Baujahr ab:</label>
    <select [(ngModel)]="filters.minYear" name="minYear">
      <option value="0">Alle Jahre</option>
      <option *ngFor="let year of firstRegistrationYears" [value]="year">{{ year }}</option>
    </select>

    <button (click)="applyFilters()" class="filter-button">Filter anwenden</button>
  </div>

  <!-- Fahrzeugliste -->
  <div class="vehicle-list">
    <!-- Suchleiste -->
    <input
      class="search-bar"
      type="text"
      [(ngModel)]="filters.searchTerm"
      placeholder="Fahrzeuge suchen..."
      (input)="applyFilters()"
    />

    <h2>Fahrzeuge</h2>

    <div class="vehicle-grid">
      <div *ngFor="let vehicle of filteredVehicles" class="vehicle-card" (click)="goToDetail(vehicle.id)">
        <img [src]="vehicle.image || 'assets/default-vehicle.jpg'" alt="{{ vehicle.name }}" class="vehicle-image" />
        <div class="vehicle-info">
          <h3>{{ vehicle.name }}</h3>
          <p>{{ vehicle.brand }} - {{ vehicle.model }}</p>
          <p>{{ vehicle.firstRegistration }}, {{ vehicle.mileage }} km, {{ vehicle.power }} PS</p>
          <p class="price">€{{ vehicle.price }}</p>
        </div>
      </div>
    </div>

    <p *ngIf="filteredVehicles.length === 0" class="no-results">Keine Fahrzeuge gefunden.</p>
  </div>
</div>
